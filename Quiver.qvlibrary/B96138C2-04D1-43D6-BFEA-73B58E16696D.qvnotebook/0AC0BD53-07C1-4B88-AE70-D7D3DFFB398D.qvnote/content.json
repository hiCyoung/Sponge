{
  "title": "hadoop文件系统浅析",
  "cells": [
    {
      "type": "text",
      "data": "<p style=\"margin: 10px auto; padding: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(238, 238, 238);\"><strong style=\"margin: 0px; padding: 0px;\">1.什么是分布式文件系统？</strong></p><p style=\"margin: 10px auto; padding: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(238, 238, 238);\">管理网络中跨多台计算机存储的文件系统称为分布式文件系统。</p><p style=\"margin: 10px auto; padding: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(238, 238, 238);\"><strong style=\"margin: 0px; padding: 0px;\">2.为什么需要分布式文件系统了？</strong></p><p style=\"margin: 10px auto; padding: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(238, 238, 238);\">原因很简单，当数据集的大小超过一台独立物理计算机的存储能力时候，就有必要对它进行分区（partition）并存储到若干台单独计算机上。</p><p style=\"margin: 10px auto; padding: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(238, 238, 238);\"><strong style=\"margin: 0px; padding: 0px;\">3.分布式系统比传统的文件的系统更加复杂</strong></p><p style=\"margin: 10px auto; padding: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(238, 238, 238);\">因为分布式文件系统架构在网络之上，因此分布式系统引入了网络编程的复杂性，所以分布式文件系统比普通文件系统更加复杂。</p><p style=\"margin: 10px auto; padding: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(238, 238, 238);\"><strong style=\"margin: 0px; padding: 0px;\">4.Hadoop</strong><strong style=\"margin: 0px; padding: 0px;\">的文件系统</strong></p><p style=\"margin: 10px auto; padding: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(238, 238, 238);\">很多童鞋会把hdfs等价于hadoop的文件系统，其实hadoop是一个综合文件系统抽象，而hdfs是hadoop旗舰级文件系统，hadoop除了hdfs还能集成其他文件系统。Hadoop的这个特点充分体现了hadoop的优良的可扩展性。</p><p style=\"margin: 10px auto; padding: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(238, 238, 238);\">在hadoop里，hadoop定义了一个抽象的文件系统的概念，具体就是hadoop里面定义了一个java的抽象类：org.apache.hadoop.fs.FileSystm，这个抽象类用来定义hadoop中的一个文件系统接口，只要某个文件系统实现了这个接口，那么它就可以作为hadoop支持的文件系统。下面是目前实现了hadoop抽象文件类的文件系统，如下表所示：</p><p style=\"margin: 10px auto; padding: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(238, 238, 238);\">&nbsp;</p><div align=\"center\" style=\"margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(238, 238, 238);\"><table border=\"1\" cellspacing=\"0\" cellpadding=\"0\" style=\"margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding: 0px; border: 1px solid silver; word-break: break-word;\"><tbody style=\"margin: 0px; padding: 0px;\"><tr style=\"margin: 0px; padding: 0px;\"><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><strong style=\"margin: 0px; padding: 0px;\">文件系统</strong></p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><strong style=\"margin: 0px; padding: 0px;\">URI</strong><strong style=\"margin: 0px; padding: 0px;\">方案</strong></p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><strong style=\"margin: 0px; padding: 0px;\">Java</strong><strong style=\"margin: 0px; padding: 0px;\">实现</strong></p><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><strong style=\"margin: 0px; padding: 0px;\">（</strong><strong style=\"margin: 0px; padding: 0px;\">org.apache.hadoop</strong><strong style=\"margin: 0px; padding: 0px;\">）</strong></p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><strong style=\"margin: 0px; padding: 0px;\">定义</strong></p></td></tr><tr style=\"margin: 0px; padding: 0px;\"><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\">Local</p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p style=\"margin: 10px auto; padding: 0px;\">file</p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p style=\"margin: 10px auto; padding: 0px;\">fs.LocalFileSystem</p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p style=\"margin: 10px auto; padding: 0px;\">支持有客户端校验和本地文件系统。带有校验和的本地系统文件在fs.RawLocalFileSystem中实现。</p></td></tr><tr style=\"margin: 0px; padding: 0px;\"><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\">HDFS</p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p style=\"margin: 10px auto; padding: 0px;\">hdfs</p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p style=\"margin: 10px auto; padding: 0px;\">hdfs.DistributionFileSystem</p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p style=\"margin: 10px auto; padding: 0px;\">Hadoop的分布式文件系统。</p></td></tr><tr style=\"margin: 0px; padding: 0px;\"><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\">HFTP</p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p style=\"margin: 10px auto; padding: 0px;\">hftp</p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p style=\"margin: 10px auto; padding: 0px;\">hdfs.HftpFileSystem</p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p style=\"margin: 10px auto; padding: 0px;\">支持通过<strong style=\"margin: 0px; padding: 0px;\">HTTP</strong>方式以<strong style=\"margin: 0px; padding: 0px;\">只读</strong>的方式访问HDFS，distcp经常用在<strong style=\"margin: 0px; padding: 0px;\">不同</strong>的HDFS<strong style=\"margin: 0px; padding: 0px;\">集群间</strong>复制数据。</p></td></tr><tr style=\"margin: 0px; padding: 0px;\"><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\">HSFTP</p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p style=\"margin: 10px auto; padding: 0px;\">hsftp</p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p style=\"margin: 10px auto; padding: 0px;\">hdfs.HsftpFileSystem</p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p style=\"margin: 10px auto; padding: 0px;\">支持通过<strong style=\"margin: 0px; padding: 0px;\">HTTPS</strong>方式以<strong style=\"margin: 0px; padding: 0px;\">只读</strong>的方式访问HDFS。</p></td></tr><tr style=\"margin: 0px; padding: 0px;\"><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\">HAR</p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p style=\"margin: 10px auto; padding: 0px;\">har</p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p style=\"margin: 10px auto; padding: 0px;\">fs.HarFileSystem</p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p style=\"margin: 10px auto; padding: 0px;\">构建在Hadoop文件系统之上，对文件进行归档。Hadoop归档文件主要用来<strong style=\"margin: 0px; padding: 0px;\">减少</strong>NameNode的<strong style=\"margin: 0px; padding: 0px;\">内存使用</strong>。</p></td></tr><tr style=\"margin: 0px; padding: 0px;\"><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\">KFS</p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p style=\"margin: 10px auto; padding: 0px;\">kfs</p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p style=\"margin: 10px auto; padding: 0px;\">fs.kfs.KosmosFileSystem</p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p style=\"margin: 10px auto; padding: 0px;\">Cloudstore（其前身是Kosmos文件系统）文件系统是<strong style=\"margin: 0px; padding: 0px;\">类似于</strong>HDFS和Google的GFS文件系统，使用C++编写。</p></td></tr><tr style=\"margin: 0px; padding: 0px;\"><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\">FTP</p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p style=\"margin: 10px auto; padding: 0px;\">ftp</p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p style=\"margin: 10px auto; padding: 0px;\">fs.ftp.FtpFileSystem</p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p style=\"margin: 10px auto; padding: 0px;\">由FTP服务器支持的文件系统。</p></td></tr><tr style=\"margin: 0px; padding: 0px;\"><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\">S3（本地）</p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p style=\"margin: 10px auto; padding: 0px;\">s3n</p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p style=\"margin: 10px auto; padding: 0px;\">fs.s3native.NativeS3FileSystem</p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p style=\"margin: 10px auto; padding: 0px;\">基于Amazon S3的文件系统。</p></td></tr><tr style=\"margin: 0px; padding: 0px;\"><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\">S3（基于块）</p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p style=\"margin: 10px auto; padding: 0px;\">s3&nbsp;</p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p style=\"margin: 10px auto; padding: 0px;\">fs.s3.NativeS3FileSystem</p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p style=\"margin: 10px auto; padding: 0px;\">基于Amazon S3的文件系统，以块格式存储解决了S3的5GB文件大小的限制。</p></td></tr></tbody></table></div><p style=\"margin: 10px auto; padding: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(238, 238, 238);\">最后我要强调一点：在hadoop里有一个文件系统概念，例如上面的FileSystem抽象类，它是位于hadoop的Common项目里，主要是定义一组分布式文件系统和通用的I/O组件和接口，hadoop的文件系统准确的应该称作hadoop I/O。而HDFS是实现该文件接口的hadoop自带的分布式文件项目,hdfs是对hadoop I/O接口的实现。</p><p style=\"margin: 10px auto; padding: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(238, 238, 238);\">下面我给大家展示一张表，这样大家对hadoop的FileSystem里的相关API操作就比较清晰了，表如下所示：</p><table border=\"1\" cellspacing=\"0\" cellpadding=\"0\" style=\"margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding: 0px; border: 1px solid silver; word-break: break-word; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(238, 238, 238);\"><tbody style=\"margin: 0px; padding: 0px;\"><tr style=\"margin: 0px; padding: 0px;\"><td valign=\"top\" width=\"142\" style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\"><strong style=\"margin: 0px; padding: 0px;\">Hadoop</strong><strong style=\"margin: 0px; padding: 0px;\">的</strong><strong style=\"margin: 0px; padding: 0px;\">FileSystem</strong></span></p></td><td valign=\"top\" width=\"142\" style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\"><strong style=\"margin: 0px; padding: 0px;\">Java</strong><strong style=\"margin: 0px; padding: 0px;\">操作</strong></span></p></td><td valign=\"top\" width=\"92\" style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\"><strong style=\"margin: 0px; padding: 0px;\">Linux</strong><strong style=\"margin: 0px; padding: 0px;\">操作</strong></span></p></td><td valign=\"top\" width=\"192\" style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\"><strong style=\"margin: 0px; padding: 0px;\">描述</strong></span></p></td></tr><tr style=\"margin: 0px; padding: 0px;\"><td width=\"142\" style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">URL.openSteam</span></p><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">FileSystem.open</span></p><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">FileSystem.create</span></p><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">FileSystem.append</span></p></td><td width=\"142\" style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">URL.openStream</span></p></td><td width=\"92\" style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">open</span></p></td><td width=\"192\" style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">打开一个文件</span></p></td></tr><tr style=\"margin: 0px; padding: 0px;\"><td width=\"142\" style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">FSDataInputStream.read</span></p></td><td width=\"142\" style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">InputSteam.read</span></p></td><td width=\"92\" style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">read</span></p></td><td width=\"192\" style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">读取文件中的数据</span></p></td></tr><tr style=\"margin: 0px; padding: 0px;\"><td width=\"142\" style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">FSDataOutputStream.write</span></p></td><td width=\"142\" style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">OutputSteam.write</span></p></td><td width=\"92\" style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">write</span></p></td><td width=\"192\" style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">向文件写入数据</span></p></td></tr><tr style=\"margin: 0px; padding: 0px;\"><td width=\"142\" style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">FSDataInputStream.close</span></p><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">FSDataOutputStream.close</span></p></td><td width=\"142\" style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">InputSteam.close</span></p><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">OutputSteam.close</span></p></td><td width=\"92\" style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">close</span></p></td><td width=\"192\" style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">关闭一个文件</span></p></td></tr><tr style=\"margin: 0px; padding: 0px;\"><td width=\"142\" style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">FSDataInputStream.seek</span></p></td><td width=\"142\" style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">RandomAccessFile.seek</span></p></td><td width=\"92\" style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">lseek</span></p></td><td width=\"192\" style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">改变文件读写位置</span></p></td></tr><tr style=\"margin: 0px; padding: 0px;\"><td width=\"142\" style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">FileSystem.getFileStatus</span></p><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">FileSystem.get*</span></p></td><td width=\"142\" style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">File.get*</span></p></td><td width=\"92\" style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">stat</span></p></td><td width=\"192\" style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">获取文件/目录的属性</span></p></td></tr><tr style=\"margin: 0px; padding: 0px;\"><td width=\"142\" style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">FileSystem.set*</span></p></td><td width=\"142\" style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">File.set*</span></p></td><td width=\"92\" style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">Chmod等</span></p></td><td width=\"192\" style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">改变文件的属性</span></p></td></tr><tr style=\"margin: 0px; padding: 0px;\"><td width=\"142\" style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">FileSystem.createNewFile</span></p></td><td width=\"142\" style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">File.createNewFile</span></p></td><td width=\"92\" style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">create</span></p></td><td width=\"192\" style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">创建一个文件</span></p></td></tr><tr style=\"margin: 0px; padding: 0px;\"><td width=\"142\" style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">FileSystem.delete</span></p></td><td width=\"142\" style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">File.delete</span></p></td><td width=\"92\" style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">remove</span></p></td><td width=\"192\" style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">从文件系统中删除一个文件</span></p></td></tr><tr style=\"margin: 0px; padding: 0px;\"><td width=\"142\" style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">FileSystem.rename</span></p></td><td width=\"142\" style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">File.renameTo</span></p></td><td width=\"92\" style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">rename</span></p></td><td width=\"192\" style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">更改文件/目录名</span></p></td></tr><tr style=\"margin: 0px; padding: 0px;\"><td width=\"142\" style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">FileSystem.mkdirs</span></p></td><td width=\"142\" style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">File.mkdir</span></p></td><td width=\"92\" style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">mkdir</span></p></td><td width=\"192\" style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">在给定目录下创建一个子目录</span></p></td></tr><tr style=\"margin: 0px; padding: 0px;\"><td width=\"142\" style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">FileSystem.delete</span></p></td><td width=\"142\" style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">File.delete</span></p></td><td width=\"92\" style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">rmdir</span></p></td><td width=\"192\" style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">从一个目录中删除一个空的子目录</span></p></td></tr><tr style=\"margin: 0px; padding: 0px;\"><td width=\"142\" style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">FileSystem.listStatus</span></p></td><td width=\"142\" style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">File.list</span></p></td><td width=\"92\" style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">readdir</span></p></td><td width=\"192\" style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">读取一个目录下的项目</span></p></td></tr><tr style=\"margin: 0px; padding: 0px;\"><td width=\"142\" style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">FileSystem.getWorkingDirectory</span></p></td><td width=\"142\" style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">&nbsp;</span></p></td><td width=\"92\" style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">getcwd/getwd</span></p></td><td width=\"192\" style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">返回当前工作目录</span></p></td></tr><tr style=\"margin: 0px; padding: 0px;\"><td width=\"142\" style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">FileSystem.setWorkingDirectory</span></p></td><td width=\"142\" style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">&nbsp;</span></p></td><td width=\"92\" style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">chdir</span></p></td><td width=\"192\" style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"center\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">更改当前工作目录</span></p></td></tr></tbody></table><p style=\"margin: 10px auto; padding: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(238, 238, 238);\">有了这张表，大家对FileSystem的理解应该会清晰多了吧。</p><p style=\"margin: 10px auto; padding: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(238, 238, 238);\">大家从对照表里会发现，hadoop的FileSystem里有两个类：FSDataInputStream和FSDataOutputStream类，它们相当于java I/O里的InputStream和Outputsteam，而事实上这两个类是继承java.io.DataInputStream和java.io.DataOutputStream。</p><p style=\"margin: 10px auto; padding: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(238, 238, 238);\">至于关于hadoop I/O本文今天不做介绍，以后也许会专门写篇文章讲讲我自己的理解，不过为了给大家一个清晰的印象，我在博客园里找到了两篇文章，有兴趣的童鞋可以好好看看看，连接如下：</p><p style=\"margin: 10px auto; padding: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(238, 238, 238);\"><a href=\"http://www.cnblogs.com/xuqiang/archive/2011/06/03/2042526.html\" style=\"margin: 0px; padding: 0px; color: black;\">http://www.cnblogs.com/xuqiang/archive/2011/06/03/2042526.html</a></p><p style=\"margin: 10px auto; padding: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(238, 238, 238);\"><a href=\"http://www.cnblogs.com/xia520pi/archive/2012/05/28/2520813.html\" style=\"margin: 0px; padding: 0px; color: black;\">http://www.cnblogs.com/xia520pi/archive/2012/05/28/2520813.html</a></p><p style=\"margin: 10px auto; padding: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(238, 238, 238);\"><strong style=\"margin: 0px; padding: 0px;\">5.数据的完整性</strong></p><p style=\"margin: 10px auto; padding: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(238, 238, 238);\">数据完整性也就是检测数据是否损坏的技术。Hadoop用户肯定都希望系统在存储和处理数据时候，数据不会有任何的丢失或损坏，尽管磁盘或网络上的每个I/O操作都不太可能将错误引入到自己正在读写的数据里，但是如果系统需要处理的数据量大到hadoop能够处理的极限，数据被损坏的概率就很高了。Hadoop引入了数据完整性校验的功能，下面我将其原理描述如下：</p><p style=\"margin: 10px auto; padding: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(238, 238, 238);\">检测数据是否损坏的措施是，在数据第一次引入系统时候计算校验和(checksum)，并在数据通过一个不可靠的通道时候进行传输时再次计算校验和，这样就能发现数据是否损坏了，如果两次计算的校验和不匹配，你就认为数据已经损坏了，但是该技术不能修复数据，它只能检测出错误。常用的错误检测码是CRC-32（循环冗余校验），任何大小的数据输入均计算得到一个32位的整数校验和。</p><p style=\"margin: 10px auto; padding: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(238, 238, 238);\"><strong style=\"margin: 0px; padding: 0px;\">6.压缩与输入分片</strong></p><p style=\"margin: 10px auto; padding: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(238, 238, 238);\">文件压缩有两大好处：一是可以减少存储文件所需要的磁盘空间，二是可以加速数据在网络和磁盘上的传输。对于处理海量数据的hadoop而言，这两个好处就变得相当重要了，所以理解hadoop的压缩是很有必要的，下表列出了hadoop支持的压缩格式，如下表：</p><table border=\"1\" cellspacing=\"0\" cellpadding=\"0\" align=\"left\" style=\"margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding: 0px; border: 1px solid silver; word-break: break-word; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(238, 238, 238);\"><tbody style=\"margin: 0px; padding: 0px;\"><tr style=\"margin: 0px; padding: 0px;\"><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">&nbsp;压缩格式</span></p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">&nbsp;工具</span></p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">&nbsp;算法</span></p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">&nbsp;文件扩展名</span></p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">&nbsp;多文件</span></p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">&nbsp;可分割性</span></p></td></tr><tr style=\"margin: 0px; padding: 0px;\"><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">&nbsp;DEFLATE</span></p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">&nbsp;无</span></p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">&nbsp;DEFLATE</span></p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">&nbsp;.deflate</span></p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">&nbsp;不</span></p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">&nbsp;不</span></p></td></tr><tr style=\"margin: 0px; padding: 0px;\"><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">&nbsp;gzip</span></p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">&nbsp;gzip</span></p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">&nbsp;DEFLATE</span></p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">&nbsp;.gz</span></p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">&nbsp;不</span></p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">&nbsp;不</span></p></td></tr><tr style=\"margin: 0px; padding: 0px;\"><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">&nbsp;ZIP</span></p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">&nbsp;zip</span></p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">&nbsp;DEFLATE</span></p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">&nbsp;.zip</span></p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">&nbsp;是</span></p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">&nbsp;是，在文件范围内</span></p></td></tr><tr style=\"margin: 0px; padding: 0px;\"><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">&nbsp;bzip2</span></p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">&nbsp;bzip2</span></p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">&nbsp;bzip2</span></p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">&nbsp;.bz2</span></p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">&nbsp;不</span></p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">&nbsp;是</span></p></td></tr><tr style=\"margin: 0px; padding: 0px;\"><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">&nbsp;LZO</span></p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">&nbsp;lzop</span></p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">&nbsp;LZO</span></p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">&nbsp;.lzo</span></p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">&nbsp;不</span></p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">&nbsp;是</span></p></td></tr></tbody></table><p style=\"margin: 10px auto; padding: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(238, 238, 238);\">&nbsp;</p><p style=\"margin: 10px auto; padding: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(238, 238, 238);\">&nbsp;</p><p style=\"margin: 10px auto; padding: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(238, 238, 238);\">&nbsp;</p><p style=\"margin: 10px auto; padding: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(238, 238, 238);\">&nbsp;</p><p style=\"margin: 10px auto; padding: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(238, 238, 238);\">&nbsp;</p><p style=\"margin: 10px auto; padding: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(238, 238, 238);\">&nbsp;</p><p style=\"margin: 10px auto; padding: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(238, 238, 238);\">&nbsp;</p><p style=\"margin: 10px auto; padding: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(238, 238, 238);\">&nbsp;</p><p style=\"margin: 10px auto; padding: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(238, 238, 238);\">&nbsp;</p><p style=\"margin: 10px auto; padding: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(238, 238, 238);\">&nbsp;</p><p style=\"margin: 10px auto; padding: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(238, 238, 238);\">在hadoop对于压缩有两个指标很重要一个是压缩率还有就是压缩速度，下表列出一些压缩格式在此方面表现的性能，如下所示：</p><table border=\"1\" cellpadding=\"0\" align=\"left\" style=\"margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding: 0px; border: 1px solid silver; word-break: break-word; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(238, 238, 238);\"><tbody style=\"margin: 0px; padding: 0px;\"><tr style=\"margin: 0px; padding: 0px;\"><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">压缩算法</span></p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">原始文件大小</span></p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">压缩后的文件大小</span></p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">压缩速度</span></p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">解压缩速度</span></p></td></tr><tr style=\"margin: 0px; padding: 0px;\"><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">gzip</span></p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">8.3GB</span></p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">1.8GB</span></p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">17.5MB/s</span></p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">58MB/s</span></p></td></tr><tr style=\"margin: 0px; padding: 0px;\"><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">bzip2</span></p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">8.3GB</span></p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">1.1GB</span></p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">2.4MB/s</span></p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">9.5MB/s</span></p></td></tr><tr style=\"margin: 0px; padding: 0px;\"><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">LZO-bset</span></p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">8.3GB</span></p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">2GB</span></p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">4MB/s</span></p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">60.6MB/s</span></p></td></tr><tr style=\"margin: 0px; padding: 0px;\"><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">LZO</span></p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">8.3GB</span></p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">2.9GB</span></p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">49.3MB/S</span></p></td><td style=\"margin: 0px; padding: 3px; border-color: silver; border-collapse: collapse;\"><p align=\"left\" style=\"margin: 10px auto; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">74.6MB/s</span></p></td></tr></tbody></table><p style=\"margin: 10px auto; padding: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(238, 238, 238);\">&nbsp;</p><p style=\"margin: 10px auto; padding: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(238, 238, 238);\">&nbsp;</p><p style=\"margin: 10px auto; padding: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(238, 238, 238);\">&nbsp;</p><p style=\"margin: 10px auto; padding: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(238, 238, 238);\">&nbsp;</p><p style=\"margin: 10px auto; padding: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(238, 238, 238);\">&nbsp;</p><p style=\"margin: 10px auto; padding: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(238, 238, 238);\">&nbsp;</p><p style=\"margin: 10px auto; padding: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(238, 238, 238);\">&nbsp;</p><p style=\"margin: 10px auto; padding: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(238, 238, 238);\">&nbsp;</p><p style=\"margin: 10px auto; padding: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(238, 238, 238);\">在hadoop支持压缩里，是否支持切分（splitting）文件的特性也是相当重要的，下面我将讲述切分的问题，也就是我标题写的输入分片的问题：</p><p style=\"margin: 10px auto; padding: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(238, 238, 238);\">　　压缩格式是否可以切分的特性是针对mapreduce处理数据而言的，比如我们有一个压缩为1GB的文件，如果hdfs块大小设置为（hdfs块我的文章里没有讲解，不理解的童鞋可以先查查百度，以后我在写hdfs时候会重点讲这个的）64mb，那么这个文件将存储在16个块里，如果把这个文件作为mapreduce作业的输入数据，mapreduce会根据这16个数据块，产生16个map操作，每个块都是其中一个map操作的输入，那么mapreduce执行效率会非常的高，但是这个前提就是该压缩格式要支持切分。假如压缩格式不支持切分的话，那么mapreduce也是可以做出正确处理，这时候它会将16个数据块放到一个map任务里面，这时候map任务数少了，作业粒度也变大了，那么执行效率就会大大下降。</p><p style=\"margin: 10px auto; padding: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(238, 238, 238);\">由于本人知识还是有限，关于压缩和切入分片的问题我就讲述到这里，下面提供一篇相关的文章，有兴趣的童鞋可以看看，链接如下：</p><p style=\"margin: 10px auto; padding: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(238, 238, 238);\"><a href=\"http://www.cnblogs.com/ggjucheng/archive/2012/04/22/2465580.html\" style=\"margin: 0px; padding: 0px; color: black;\">http://www.cnblogs.com/ggjucheng/archive/2012/04/22/2465580.html</a></p><p style=\"margin: 10px auto; padding: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(238, 238, 238);\"><strong style=\"margin: 0px; padding: 0px;\">7.hadoop</strong><strong style=\"margin: 0px; padding: 0px;\">序列化</strong></p><p style=\"margin: 10px auto; padding: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(238, 238, 238);\">我们先看两个定义：</p><p style=\"margin: 10px auto; padding: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(238, 238, 238);\"><strong style=\"margin: 0px; padding: 0px;\">序列化</strong>：是指将结构化对象转化为字节流，以便在网络上传输或写到磁盘上进行永久存储。</p><p style=\"margin: 10px auto; padding: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(238, 238, 238);\"><strong style=\"margin: 0px; padding: 0px;\">反序列化</strong>：是指将字节流转向结构化对象的逆过程。</p><p style=\"margin: 10px auto; padding: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(238, 238, 238);\">序列化在分布式数据处理量大领域经常出现：进程通信和永久存储。</p><p style=\"margin: 10px auto; padding: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(238, 238, 238);\">Hadoop中，各个节点的通信是通过远程调用（RPC）实现的，RPC将数据序列化成二进制后发送给远程节点，远程节点收到数据后将二进制字节流反序列化为原始数据。序列化在RPC应用中有着自己的特点，RPC序列化的特点是：</p><ol style=\"margin: 0px; padding: 0px 0px 0px 40px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(238, 238, 238);\"><li style=\"margin: 0px 0px 1em; padding: 0px; list-style: decimal;\">紧凑：紧凑的格式能让我们能充分利用网络带宽，而带宽是数据中心最稀缺的资源；</li><li style=\"margin: 0px 0px 1em; padding: 0px; list-style: decimal;\">快速：进程通信形成了分布式系统的骨架，所以需要尽量减少序列化和反序列化的性能开销，这是基本的</li><li style=\"margin: 0px 0px 1em; padding: 0px; list-style: decimal;\">可扩展：协议为了满足新的需求变化，所以控制客户端和服务器过程中，需要直接引进相应的协议，这些事新协议，原序列化方式能支持心得协议报文</li><li style=\"margin: 0px 0px 1em; padding: 0px; list-style: decimal;\">互操作：能支持不同语言写的客户端和服务端进行交互</li></ol><p style=\"margin: 10px auto; padding: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(238, 238, 238);\">在hadoop里面有自己定义的序列化格式：writable，它是hadoop的核心之一。</p><p style=\"margin: 10px auto; padding: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(238, 238, 238);\">Writable是一个接口，要实现hadoop的序列化就得实现该接口。因为时间原因，序列化我也不展开了，我下面也推荐一篇文章，里面讲述了hadoop的序列化，虽然讲的简单点，而且不全面，但是看完后对hadoop序列化的具体实现会有个初步的了解，链接如下：</p><p style=\"margin: 10px auto; padding: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(238, 238, 238);\"><a href=\"http://blog.csdn.net/a15039096218/article/details/7591072\" style=\"margin: 0px; padding: 0px; color: black;\">http://blog.csdn.net/a15039096218/article/details/7591072</a></p>"
    }
  ]
}
{
  "title": "查看SQL执行时间",
  "cells": [
    {
      "type": "text",
      "data": "<p style=\"font-family: 'Helvetica Neue'; font-size: 15px; margin: 0.667rem 0px; color: rgb(0, 0, 0); font-variant-ligatures: normal; font-variant-east-asian: normal; font-variant-position: normal; line-height: 24px; background-color: rgb(245, 245, 245);\"><strong>一，show profiles 之类的语句来查看</strong></p><p style=\"font-family: 'Helvetica Neue'; font-size: 15px; margin: 0.667rem 0px; color: rgb(0, 0, 0); font-variant-ligatures: normal; font-variant-east-asian: normal; font-variant-position: normal; line-height: 24px; background-color: rgb(245, 245, 245);\"><strong>1，查一下profile是不是打开了，默认是不打开的。</strong></p><pre style=\"margin-top: 0.667rem; margin-bottom: 0.667rem; color: rgb(0, 0, 0); font-size: 15px; font-variant-ligatures: normal; font-variant-east-asian: normal; font-variant-position: normal; line-height: 24px; background-color: rgb(245, 245, 245);\">mysql&gt; show profiles;\nEmpty set (0.02 sec)\n\nmysql&gt; show variables like \"%pro%\";\n+---------------------------+-------+\n| Variable_name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | Value |\n+---------------------------+-------+\n| profiling&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | OFF&nbsp;&nbsp; |\n| profiling_history_size&nbsp;&nbsp;&nbsp; | 15&nbsp;&nbsp;&nbsp; |\n| protocol_version&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 10&nbsp;&nbsp;&nbsp; |\n| slave_compressed_protocol | OFF&nbsp;&nbsp; |\n+---------------------------+-------+\n4 rows in set (0.00 sec)</pre><p style=\"font-family: 'Helvetica Neue'; font-size: 15px; margin: 0.667rem 0px; color: rgb(0, 0, 0); font-variant-ligatures: normal; font-variant-east-asian: normal; font-variant-position: normal; line-height: 24px; background-color: rgb(245, 245, 245);\">我查看一下profiles里面没有东西，所以公司的电脑里面profile是没有打开的，我查看了一下mysql变量，果然是OFF的。</p><p style=\"font-family: 'Helvetica Neue'; font-size: 15px; margin: 0.667rem 0px; color: rgb(0, 0, 0); font-variant-ligatures: normal; font-variant-east-asian: normal; font-variant-position: normal; line-height: 24px; background-color: rgb(245, 245, 245);\"><strong>2，开启profile，然后测试</strong></p><p style=\"font-family: 'Helvetica Neue'; font-size: 15px; margin: 0.667rem 0px; color: rgb(0, 0, 0); font-variant-ligatures: normal; font-variant-east-asian: normal; font-variant-position: normal; line-height: 24px; background-color: rgb(245, 245, 245);\">开启profile</p><pre style=\"margin-top: 0.667rem; margin-bottom: 0.667rem; color: rgb(0, 0, 0); font-size: 15px; font-variant-ligatures: normal; font-variant-east-asian: normal; font-variant-position: normal; line-height: 24px; background-color: rgb(245, 245, 245);\">mysql&gt; set profiling=1;\nQuery OK, 0 rows affected (0.00 sec)</pre><p style=\"font-family: 'Helvetica Neue'; font-size: 15px; margin: 0.667rem 0px; color: rgb(0, 0, 0); font-variant-ligatures: normal; font-variant-east-asian: normal; font-variant-position: normal; line-height: 24px; background-color: rgb(245, 245, 245);\">测试如下：</p><pre style=\"margin-top: 0.667rem; margin-bottom: 0.667rem; color: rgb(0, 0, 0); font-size: 15px; font-variant-ligatures: normal; font-variant-east-asian: normal; font-variant-position: normal; line-height: 24px; background-color: rgb(245, 245, 245);\">mysql&gt; show tables;\n+----------------+\n| Tables_in_test |\n+----------------+\n| aa&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |\n| bb&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |\n| comment&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |\n| string_test&nbsp;&nbsp;&nbsp; |\n| user&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |\n+----------------+\n5 rows in set (0.00 sec)\n\nmysql&gt; select * from aa;\n+----+------+------------+------+\n| id | name | nname&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | sex&nbsp; |\n+----+------+------------+------+\n|&nbsp; 2 | tank | bbbb,4bbbb | NULL |\n|&nbsp; 3 | zhang| 3,c,u&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | NULL |\n+----+------+------------+------+\n2 rows in set (0.00 sec)\n\nmysql&gt; update aa set name='d';\nQuery OK, 2 rows affected (0.00 sec)\nRows matched: 2&nbsp; Changed: 2&nbsp; Warnings: 0\n\nmysql&gt; delete from bb;\nQuery OK, 2 rows affected (0.00 sec)\n\nmysql&gt; show profiles;\n+----------+------------+------------------------+\n| Query_ID | Duration&nbsp;&nbsp; | Query&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |\n+----------+------------+------------------------+\n|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 | 0.00054775 | show tables&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |\n|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2 | 0.00022400 | select * from aa&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |\n|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3 | 0.00026275 | update aa set name='d' |\n|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4 | 0.00043000 | delete from bb&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |\n+----------+------------+------------------------+\n4 rows in set (0.00 sec)\n\nmysql&gt; show profile;\n+----------------------+-----------+\n| Status&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | Duration&nbsp; |\n+----------------------+-----------+\n| (initialization)&nbsp;&nbsp;&nbsp;&nbsp; | 0.0000247 |\n| checking permissions | 0.0000077 |\n| Opening tables&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 0.0000099 |\n| System lock&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 0.000004&nbsp; |\n| Table lock&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 0.000005&nbsp; |\n| init&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 0.0003057 |\n| query end&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 0.0000062 |\n| freeing items&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 0.000057&nbsp; |\n| closing tables&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 0.000008&nbsp; |\n| logging slow query&nbsp;&nbsp; | 0.0000015 |\n+----------------------+-----------+\n10 rows in set (0.00 sec)\n\nmysql&gt; show profile for query 1;\n+----------------------+-----------+\n| Status&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | Duration&nbsp; |\n+----------------------+-----------+\n| (initialization)&nbsp;&nbsp;&nbsp;&nbsp; | 0.000028&nbsp; |\n| checking permissions | 0.000007&nbsp; |\n| Opening tables&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 0.0000939 |\n| System lock&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 0.0000017 |\n| Table lock&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 0.0000055 |\n| init&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 0.000009&nbsp; |\n| optimizing&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 0.0000027 |\n| statistics&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 0.0000085 |\n| preparing&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 0.0000065 |\n| executing&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 0.000004&nbsp; |\n| checking permissions | 0.000258&nbsp; |\n| Sending data&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 0.000049&nbsp; |\n| end&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 0.0000037 |\n| query end&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 0.0000027 |\n| freeing items&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 0.0000307 |\n| closing tables&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 0.0000032 |\n| removing tmp table&nbsp;&nbsp; | 0.0000275 |\n| closing tables&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 0.0000037 |\n| logging slow query&nbsp;&nbsp; | 0.000002&nbsp; |\n+----------------------+-----------+\n19 rows in set (0.00 sec)\n\nmysql&gt; show profile for query 3;\n+----------------------+-----------+\n| Status&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | Duration&nbsp; |\n+----------------------+-----------+\n| (initialization)&nbsp;&nbsp;&nbsp;&nbsp; | 0.0000475 |\n| checking permissions | 0.0000077 |\n| Opening tables&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 0.000026&nbsp; |\n| System lock&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 0.0000042 |\n| Table lock&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 0.0000045 |\n| init&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 0.0000205 |\n| Updating&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 0.0000787 |\n| end&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 0.0000567 |\n| query end&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 0.000004&nbsp; |\n| freeing items&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 0.0000067 |\n| closing tables&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 0.000004&nbsp; |\n| logging slow query&nbsp;&nbsp; | 0.000002&nbsp; |\n+----------------------+-----------+\n12 rows in set (0.00 sec)<br clear=\"none\"><br clear=\"none\"></pre><p style=\"font-family: 'Helvetica Neue'; font-size: 15px; margin: 0.667rem 0px; color: rgb(0, 0, 0); font-variant-ligatures: normal; font-variant-east-asian: normal; font-variant-position: normal; line-height: 24px; background-color: rgb(245, 245, 245);\"><strong>二，timestampdiff来查看测试时间</strong></p><pre style=\"margin-top: 0.667rem; margin-bottom: 0.667rem; color: rgb(0, 0, 0); font-size: 15px; font-variant-ligatures: normal; font-variant-east-asian: normal; font-variant-position: normal; line-height: 24px; background-color: rgb(245, 245, 245);\">mysql&gt; set @d=now();\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql&gt; select * from comment;\n+------+-----+------+------------+---------------------+\n| c_id | mid | name | content&nbsp;&nbsp;&nbsp; | datetime&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |\n+------+-----+------+------------+---------------------+\n|&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp; 1 | ??&nbsp;&nbsp; | 2222222211 | 2010-05-12 00:00:00 |\n|&nbsp;&nbsp;&nbsp; 2 |&nbsp;&nbsp; 1 | ??&nbsp;&nbsp; | ????(??)&nbsp;&nbsp; | 2010-05-13 00:00:00 |\n|&nbsp;&nbsp;&nbsp; 3 |&nbsp;&nbsp; 2 | tank | ??????&nbsp;&nbsp;&nbsp;&nbsp; | 0000-00-00 00:00:00 |\n+------+-----+------+------------+---------------------+\n3 rows in set (0.00 sec)\n\nmysql&gt; select timestampdiff(second,@d,now());\n+--------------------------------+\n| timestampdiff(second,@d,now()) |\n+--------------------------------+\n|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0 |\n+--------------------------------+\n1 row in set (0.00 sec)\n</pre><p style=\"font-family: 'Helvetica Neue'; font-size: 15px; margin: 0.667rem 0px; color: rgb(0, 0, 0); font-variant-ligatures: normal; font-variant-east-asian: normal; font-variant-position: normal; line-height: 24px; background-color: rgb(245, 245, 245);\"><strong>这种方法有一点要注意，就是三条sql语句要尽量连一起执行，不然误差太大，根本不准</strong></p><pre style=\"margin-top: 0.667rem; margin-bottom: 0.667rem; color: rgb(0, 0, 0); font-size: 15px; font-variant-ligatures: normal; font-variant-east-asian: normal; font-variant-position: normal; line-height: 24px; background-color: rgb(245, 245, 245);\">set @d=now();\nselect * from comment;\nselect timestampdiff(second,@d,now());\n</pre><p style=\"font-family: 'Helvetica Neue'; font-size: 15px; margin: 0.667rem 0px; color: rgb(0, 0, 0); font-variant-ligatures: normal; font-variant-east-asian: normal; font-variant-position: normal; line-height: 24px; background-color: rgb(245, 245, 245);\"><strong>如果是用命令行来执行的话，有一点要注意，就是在select timestampdiff(second,@d,now());后面，一定要多copy一个空行，不然最后一个sql要你自己按回车执行，这样就不准了。</strong></p>"
    }
  ]
}
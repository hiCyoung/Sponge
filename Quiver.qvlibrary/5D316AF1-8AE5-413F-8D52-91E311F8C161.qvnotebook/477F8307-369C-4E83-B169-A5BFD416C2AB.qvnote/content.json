{
  "title": "limit offset优化",
  "cells": [
    {
      "type": "text",
      "data": "<p style=\"font-family: 'Helvetica Neue'; font-size: 15px; margin-right: 0px; margin-bottom: 10px; margin-left: 0px; color: rgb(0, 0, 0); font-variant-ligatures: normal; font-variant-east-asian: normal; font-variant-position: normal; line-height: 24px; margin-top: 0px !important;\">使用Limit+Offset结合的方式是很常见的分页办法，但是随着offset值不断的增大，效率会越来越低，据我了解，limit offset 需要从头开始进行扫描，对于limit 10 offset 100000的情况，需要扫描前面的100000条记录，我的理解是否正确？有没有其它更好的方式来进行分页？</p><p style=\"font-family: 'Helvetica Neue'; font-size: 15px; margin: 10px 0px; color: rgb(0, 0, 0); font-variant-ligatures: normal; font-variant-east-asian: normal; font-variant-position: normal; line-height: 24px;\">MySQL里对LIMIT OFFSET的处理方式是，取出OFFSET+LIMIT的所有数据，然后去掉OFFSET，返回底部的LIMIT。&nbsp;<br>所以，在OFFSET数值较大时，MySQL的查询性能会非常低。</p><pre class=\"prettyprint linenums prettyprinted\" style=\"margin-top: 10px; margin-bottom: 10px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); line-height: 19px; overflow: auto; padding: 10px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; word-wrap: break-word; font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace; box-shadow: rgb(251, 251, 252) 40px 0px 0px inset, rgb(236, 236, 240) 41px 0px 0px inset; color: rgb(0, 0, 0); font-variant-ligatures: normal; font-variant-east-asian: normal; font-variant-position: normal;\"><ol class=\"linenums\" style=\"margin: 0px; padding-left: 30px !important; color: rgb(30, 52, 123);\"><li class=\"L0\" style=\"margin: 0px; color: rgb(190, 190, 197); line-height: 18px; padding-left: 12px !important; list-style-type: decimal !important;\"><code class=\"language-SQL\" style=\"padding-top: 0px; padding-bottom: 0px; border: none; font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace; word-wrap: break-word; max-width: 100%;\"><span class=\"pln\" style=\"color: rgb(72, 72, 76); margin-top: 0px;\">SELECT </span><span class=\"pun\" style=\"color: rgb(147, 161, 161);\">*</span><span class=\"pln\" style=\"color: rgb(72, 72, 76);\"> FROM table_name ORDER BY id ASC LIMIT </span><span class=\"lit\" style=\"color: rgb(25, 95, 145);\">10</span><span class=\"pln\" style=\"color: rgb(72, 72, 76);\"> OFFSET </span><span class=\"lit\" style=\"color: rgb(25, 95, 145);\">10</span></code></li></ol></pre><p style=\"font-family: 'Helvetica Neue'; font-size: 15px; margin: 10px 0px; color: rgb(0, 0, 0); font-variant-ligatures: normal; font-variant-east-asian: normal; font-variant-position: normal; line-height: 24px;\">MySQL会取出20条数据，只返回后10条。</p><pre class=\"prettyprint linenums prettyprinted\" style=\"margin-top: 10px; margin-bottom: 10px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); line-height: 19px; overflow: auto; padding: 10px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; word-wrap: break-word; font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace; box-shadow: rgb(251, 251, 252) 40px 0px 0px inset, rgb(236, 236, 240) 41px 0px 0px inset; color: rgb(0, 0, 0); font-variant-ligatures: normal; font-variant-east-asian: normal; font-variant-position: normal;\"><ol class=\"linenums\" style=\"margin: 0px; padding-left: 30px !important; color: rgb(30, 52, 123);\"><li class=\"L0\" style=\"margin: 0px; color: rgb(190, 190, 197); line-height: 18px; padding-left: 12px !important; list-style-type: decimal !important;\"><code class=\"language-SQL\" style=\"padding-top: 0px; padding-bottom: 0px; border: none; font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace; word-wrap: break-word; max-width: 100%;\"><span class=\"pln\" style=\"color: rgb(72, 72, 76); margin-top: 0px;\">SELECT </span><span class=\"pun\" style=\"color: rgb(147, 161, 161);\">*</span><span class=\"pln\" style=\"color: rgb(72, 72, 76);\"> FROM table_name WHERE id </span><span class=\"pun\" style=\"color: rgb(147, 161, 161);\">&gt;</span><span class=\"pln\" style=\"color: rgb(72, 72, 76);\"> </span><span class=\"lit\" style=\"color: rgb(25, 95, 145);\">10</span><span class=\"pln\" style=\"color: rgb(72, 72, 76);\"> ORDER BY id ASC LIMIT </span><span class=\"lit\" style=\"color: rgb(25, 95, 145);\">10</span></code></li></ol></pre><p style=\"font-family: 'Helvetica Neue'; font-size: 15px; margin-top: 10px; margin-right: 0px; margin-left: 0px; color: rgb(0, 0, 0); font-variant-ligatures: normal; font-variant-east-asian: normal; font-variant-position: normal; line-height: 24px; margin-bottom: 0px !important;\">利用id索引，MySQL只取出10个结果，返回。这种做法却是要求连续翻页，不能跳页，受约束。</p>"
    }
  ]
}